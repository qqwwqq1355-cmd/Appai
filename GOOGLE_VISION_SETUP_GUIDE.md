# ๐ค ุฏููู ุฅุนุฏุงุฏ Google Cloud Vision API

## ๐ ูุธุฑุฉ ุนุงูุฉ / Overview

Google Cloud Vision API ููุชุนุฑู ุงูุฐูู ุนูู ุงูููุชุฌุงุช ุจุงูุตูุฑ:
- โ ุงูุชุนุฑู ุนูู ุงูููุชุฌุงุช ูู ุงูุตูุฑุฉ
- โ ูุฑุงุกุฉ ุงููุตูุต (OCR)
- โ ุงูุชุดุงู ุงูุดุนุงุฑุงุช ุงูุชุฌุงุฑูุฉ
- โ ุชุญุฏูุฏ ุฃุณูุงุก ุงูููุชุฌุงุช ุชููุงุฆูุงู
- โ ุชูููุฏ ุงูุชุฑุงุญุงุช ุจุญุซ ุฐููุฉ

---

## ๐ฏ ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุดุฑูุน Google Cloud

### 1. ุงูุฐูุงุจ ุฅูู Google Cloud Console

**ุงูุฑุงุจุท:**
```
https://console.cloud.google.com
```

### 2. ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ

1. ุงุถุบุท ุนูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุงูุฃุนูู
2. ุงุฎุชุฑ "New Project" ุฃู "ูุดุฑูุน ุฌุฏูุฏ"
3. ุงููุฃ ุงูุชูุงุตูู:
   - **Project Name:** MarketLens
   - **Organization:** (ุงุฎุชูุงุฑู)
4. ุงุถุบุท "Create" ุฃู "ุฅูุดุงุก"

**โฑ๏ธ ุงูุชุธุฑ 1-2 ุฏูููุฉ ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน**

---

## ๐ ุงูุฎุทูุฉ 2: ุชูุนูู Cloud Vision API

### 1. ุงูุจุญุซ ุนู API

1. ูู ุดุฑูุท ุงูุจุญุซ ุงูุนูููุ ุงูุชุจ: `Vision API`
2. ุงุฎุชุฑ **Cloud Vision API**
3. ุงุถุบุท "Enable" ุฃู "ุชูุนูู"

**โฑ๏ธ ุงูุชุธุฑ ุญุชู ููุชูู ุงูุชูุนูู (30 ุซุงููุฉ - ุฏูููุฉ)**

### 2. ุชุฃููุฏ ุงูุชูุนูู

ุณุชุธูุฑ ุฑุณุงูุฉ: โ **API enabled**

---

## ๐ ุงูุฎุทูุฉ 3: ุฅูุดุงุก Service Account

### 1. ุงูุฐูุงุจ ุฅูู Service Accounts

1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: **IAM & Admin** > **Service Accounts**
2. ุฃู ุงุจุญุซ ุนู `Service Accounts` ูู ุดุฑูุท ุงูุจุญุซ

### 2. ุฅูุดุงุก ุญุณุงุจ ุฎุฏูุฉ ุฌุฏูุฏ

1. ุงุถุบุท **"+ CREATE SERVICE ACCOUNT"**
2. ุงููุฃ ุงูุจูุงูุงุช:
   - **Service account name:** marketlens-vision
   - **Service account ID:** ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู
   - **Description:** Vision API access for MarketLens app
3. ุงุถุบุท **"CREATE AND CONTINUE"**

### 3. ููุญ ุงูุตูุงุญูุงุช

ูู ูุณู "Grant this service account access":
1. ุงุจุญุซ ุนู **"Cloud Vision AI Service Agent"**
2. ุฃู ุงุฎุชุฑ **"Cloud Vision API User"**
3. ุงุถุบุท **"CONTINUE"**

### 4. ุชุฎุทู ุงูุฎุทูุฉ ุงูุซุงูุซุฉ (ุงุฎุชูุงุฑู)
ุงุถุบุท **"DONE"**

---

## ๐ฅ ุงูุฎุทูุฉ 4: ุชุญููู JSON Key

### 1. ุฅูุดุงุก ููุชุงุญ

ูู ูุงุฆูุฉ Service Accounts:
1. ุงุถุบุท ุนูู ุงูุญุณุงุจ ุงูุฐู ุฃูุดุฃุชู (marketlens-vision)
2. ุงุฐูุจ ุฅูู ุชุจููุจ **"KEYS"**
3. ุงุถุบุท **"ADD KEY"** > **"Create new key"**
4. ุงุฎุชุฑ ููุน ุงูููุชุงุญ: **JSON**
5. ุงุถุบุท **"CREATE"**

**๐ ุณูุชู ุชุญููู ููู JSON ุชููุงุฆูุงู!**

### 2. ุญูุธ ุงูููู

ุงูููู ุณูููู ุจูุฐุง ุงูุดูู:
```
marketlens-vision-xxxxxx.json
```

**โ๏ธ ูุฐุง ุงูููู ูุญุชูู ุนูู ุจูุงูุงุช ุณุฑูุฉ! ูุง ุชุดุงุฑูู ุฃุจุฏุงู**

---

## ๐ ุงูุฎุทูุฉ 5: ุฅุถุงูุฉ ุงูููุชุงุญ ูููุดุฑูุน

### 1. ุฅูุดุงุก ูุฌูุฏ config

ูู ูุฌูุฏ `backend`:
```bash
mkdir config
```

### 2. ููู ููู JSON

ุงููู ุงูููู ุงูุฐู ุญููุชู ุฅูู:
```
backend/config/google-cloud-key.json
```

ุฃู ุฃุนุฏ ุชุณููุชู:
```bash
mv ~/Downloads/marketlens-vision-xxxxxx.json backend/config/google-cloud-key.json
```

### 3. ุชุฃูุฏ ูู ุงููุณุงุฑ

```
๐ backend/
  ๐ config/
    ๐ google-cloud-key.json  โ ุงูููุชุงุญ ููุง
  ๐ models/
  ๐ routes/
  ๐ .env
  ๐ index.js
```

---

## โ๏ธ ุงูุฎุทูุฉ 6: ุชุญุฏูุซ ููู .env

### ุงูุชุญ ููู `.env` ูุฃุถู:

```env
# Google Cloud Vision API
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_APPLICATION_CREDENTIALS=./config/google-cloud-key.json
```

### ููู ุชุญุตู ุนูู Project IDุ

**ุงูุทุฑููุฉ 1:** ูู ููู JSON
ุงูุชุญ `google-cloud-key.json` ูุงุจุญุซ ุนู:
```json
{
  "project_id": "marketlens-123456",
  ...
}
```

**ุงูุทุฑููุฉ 2:** ูู Google Cloud Console
- ูู ุฃุนูู ุงูุตูุญุฉ ุจุฌุงูุจ ุงุณู ุงููุดุฑูุน
- ูุซุงู: `marketlens-123456`

### ูุซุงู ูุงูู:

```env
GOOGLE_CLOUD_PROJECT_ID=marketlens-123456
GOOGLE_APPLICATION_CREDENTIALS=./config/google-cloud-key.json
```

**ุงุญูุธ ุงูููู ูุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ:**
```bash
cd backend
npm install
npm start
```

---

## ๐งช ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ุงูุชูุงูู

### 1. ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช

```bash
curl http://localhost:3000/api/vision/status
```

ูุฌุจ ุฃู ุชุญุตู ุนูู:
```json
{
  "configured": true,
  "message": "Google Cloud Vision is configured and ready"
}
```

### 2. ุงุฎุชุจุงุฑ ุชุญููู ุตูุฑุฉ

ุงุญูุธ ุตูุฑุฉ ููุชุฌุ ุซู:
```bash
curl -X POST http://localhost:3000/api/vision/analyze \
  -F "image=@/path/to/product.jpg"
```

### 3. ุงุฎุชุจุงุฑ ุงูุชุฑุงุญุงุช ุงูููุชุฌุงุช

```bash
curl -X POST http://localhost:3000/api/vision/suggestions \
  -F "image=@/path/to/product.jpg"
```

---

## ๐ API Endpoints ุงููุชุงุญุฉ

### GET `/api/vision/status`
ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช API

### POST `/api/vision/analyze`
ุชุญููู ุดุงูู ููุตูุฑุฉ (ูู ุดูุก)
```bash
curl -X POST http://localhost:3000/api/vision/analyze \
  -F "image=@product.jpg"
```

Response:
```json
{
  "success": true,
  "analysis": {
    "labels": [...],      // ุงูุชุตูููุงุช
    "product": {...},     // ูุนูููุงุช ุงูููุชุฌ
    "text": "...",        // ุงููุตูุต ุงูููุชุดูุฉ
    "logos": [...]        // ุงูุดุนุงุฑุงุช
  }
}
```

### POST `/api/vision/detect-product`
ุงูุชุดุงู ุงูููุชุฌ ูู ุงูุตูุฑุฉ

### POST `/api/vision/extract-text`
ุงุณุชุฎุฑุงุฌ ุงููุตูุต ูู ุงูุตูุฑุฉ (OCR)

### POST `/api/vision/suggestions`
ุงูุญุตูู ุนูู ุงูุชุฑุงุญุงุช ุฃุณูุงุก ุงูููุชุฌุงุช
```bash
curl -X POST http://localhost:3000/api/vision/suggestions \
  -F "image=@headphones.jpg"
```

Response:
```json
{
  "success": true,
  "count": 5,
  "suggestions": [
    "Wireless Headphones",
    "Sony WH-1000XM5",
    "Bluetooth Headset",
    "Audio Equipment",
    "Electronics"
  ]
}
```

### POST `/api/vision/detect-logos`
ุงูุชุดุงู ุงูุดุนุงุฑุงุช ุงูุชุฌุงุฑูุฉ

---

## ๐ฐ ุงูุชูููุฉ ูุงูุญุฏูุฏ

### Free Tier (ุงููุฌุงูู)

Google Cloud Vision ูููุฑ:
- โ **1,000 ูุญุฏุฉ/ุดูุฑ ูุฌุงูุงู**
- ูู ุทูุจ = 1 ูุญุฏุฉ ุนุงุฏุฉ

### ุงูุชุณุนูุฑ ุจุนุฏ Free Tier

- **0-1 ููููู ูุญุฏุฉ:** $1.50 ููู 1000 ูุญุฏุฉ
- **1-5 ููููู:** $1.00 ููู 1000
- **5+ ููููู:** $0.60 ููู 1000

**ูุซุงู:**
- 5,000 ุทูุจ/ุดูุฑ = ~$6
- 50,000 ุทูุจ/ุดูุฑ = ~$50

### ูุฑุงูุจุฉ ุงูุงุณุชุฎุฏุงู

1. ุงุฐูุจ ุฅูู **Billing** ูู Google Cloud Console
2. ุงุฎุชุฑ **Cost table**
3. ุชุงุจุน ุงุณุชุฎุฏุงู Vision API

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุงุณุชุฎุฏู Cache:**
   - ุงุญูุธ ูุชุงุฆุฌ ุงูุชุญููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุง ุชุญูู ููุณ ุงูุตูุฑุฉ ูุฑุชูู

2. **ุถุบุท ุงูุตูุฑ:**
   - ููู ุญุฌู ุงูุตูุฑ ูุจู ุงูุฅุฑุณุงู
   - ุงุณุชุฎุฏู ุฌูุฏุฉ ูุนูููุฉ (80-90%)

3. **ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก:**
   - ุฅุฐุง ูุดู Vision APIุ ุงุณุชุฎุฏู ุงูุจุงุฑููุฏ
   - ุฃู ุงุทูุจ ูู ุงููุณุชุฎุฏู ุฅุฏุฎุงู ุงุณู ุงูููุชุฌ

### โ๏ธ ุงูุฃูุงู

- **ูุง ุชุดุงุฑู ููู JSON:**
  - ุฃุถูู ุฅูู `.gitignore`
  - ูุง ุชุฑูุนู ุนูู GitHub

- **ููุฏ ุงูุตูุงุญูุงุช:**
  - ุงุณุชุฎุฏู Cloud Vision API ููุท
  - ูุง ุชุนุทู ุตูุงุญูุงุช ุฃูุซุฑ ูู ุงููุงุฒู

---

## ๐ ุณูุฑ ุงูุนูู ุงูููุตู ุจู

### ุงุณุชุฎุฏุงู Vision API ูุน ุงูุจุงุฑููุฏ

```
1. ุงููุณุชุฎุฏู ููุชูุท ุตูุฑุฉ ุงูููุชุฌ
   โ
2. ูุญุงูู ูุฑุงุกุฉ ุงูุจุงุฑููุฏ ุฃููุงู (ุณุฑูุน ููุฌุงูู)
   โ
3. ุฅุฐุง ูู ูุฌุฏ ุจุงุฑููุฏ:
   โ ูุณุชุฎุฏู Vision API ูุชุญุฏูุฏ ุงูููุชุฌ
   โ ูุญุตู ุนูู ุงูุชุฑุงุญุงุช ุงูุฃุณูุงุก
   โ
4. ูุจุญุซ ูู Admitad API ุจุงุณู ุงูููุชุฌ
   โ
5. ูุนุฑุถ ุงููุชุงุฆุฌ ูููุณุชุฎุฏู
```

---

## ๐ ุญู ุงููุดุงูู

### ุฎุทุฃ: "Google Cloud Vision not configured"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ `GOOGLE_APPLICATION_CREDENTIALS` ูู `.env`
2. ุชุฃูุฏ ูู ูุฌูุฏ ููู JSON ูู ุงููุณุงุฑ ุงูุตุญูุญ
3. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

### ุฎุทุฃ: "Permission denied"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูุนูู Cloud Vision API
2. ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุตูุงุญูุงุช ุงูุตุญูุญุฉ ููู Service Account
3. ุฌุฑุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูููุชุงุญ

### ุฎุทุฃ: "Quota exceeded"

**ุงูุญู:**
1. ุชุฌุงูุฒุช ุงูุญุฏ ุงููุฌุงูู (1000 ุทูุจ/ุดูุฑ)
2. ุฃุถู ุทุฑููุฉ ุฏูุน ูู Google Cloud
3. ุฃู ููู ุนุฏุฏ ุงูุทูุจุงุช

### ุงูุตูุฑุฉ ูุง ุชูุญูููู ุจุดูู ุตุญูุญ

**ุงูุญููู:**
- ุงุณุชุฎุฏู ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ
- ุชุฃูุฏ ูู ูุถูุญ ุงูููุชุฌ ูู ุงูุตูุฑุฉ
- ุฌุฑุจ ุฅุถุงุกุฉ ุฃูุถู
- ุชุฃูุฏ ูู ุญุฌู ุงูุตูุฑุฉ (< 10MB)

---

## โ Checklist ุณุฑูุน

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู:
- [ ] ุญุณุงุจ Google Cloud ููุนูู
- [ ] ูุดุฑูุน GCP ููุดุฃ
- [ ] Cloud Vision API ููุนูู
- [ ] Service Account ููุดุฃ ูุน ุงูุตูุงุญูุงุช
- [ ] ููู JSON ูุญููู
- [ ] ุงูููู ูู `backend/config/google-cloud-key.json`
- [ ] `GOOGLE_APPLICATION_CREDENTIALS` ูู `.env`
- [ ] ุซุจูุช ุงูููุชุจุงุช: `npm install`
- [ ] ุฃุนุฏุช ุชุดุบูู ุงูุณูุฑูุฑ
- [ ] ุงุฎุชุจุฑุช `/api/vision/status`

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

### ุฑูุงุจุท ูููุฏุฉ
- **Google Cloud Console:** https://console.cloud.google.com
- **Vision API Docs:** https://cloud.google.com/vision/docs
- **Pricing:** https://cloud.google.com/vision/pricing
- **Free Tier:** https://cloud.google.com/free

### ููุฏุนู
- **Google Cloud Support:** https://cloud.google.com/support
- **Stack Overflow:** Tag `google-cloud-vision`

---

**ุชู ุงูุชูุงูู ุจูุฌุงุญ! ๐**

ุงูุขู ูููู ููุชุทุจูู ุงูุชุนุฑู ุนูู ุงูููุชุฌุงุช ูู ุงูุตูุฑ ุชููุงุฆูุงู ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู!
